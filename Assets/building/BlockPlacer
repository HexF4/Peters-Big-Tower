using UnityEngine;

public class BlockPlacer : MonoBehaviour
{
    public GameObject blockPrefab;
    public GameObject ghostBlock;
    public LayerMask placementLayer;
    public float maxDistance = 5f;

    void Update()
    {
        Camera cam = Camera.main;
        Ray ray = new Ray(cam.transform.position, cam.transform.forward);
        RaycastHit hit;

        if (Physics.Raycast(ray, out hit, maxDistance, placementLayer)) {
            Vector3Int placePos = Vector3Int.RoundToInt(hit.point + hit.normal * 0.5f);
            ghostBlock.transform.position = placePos;

            if (Input.GetMouseButtonDown(0)) {
                GridManager.Instance.PlaceBlock(placePos, blockPrefab);
            }

            if (Input.GetMouseButtonDown(1)) {
                Vector3Int removePos = Vector3Int.RoundToInt(hit.point - hit.normal * 0.5f);
                GridManager.Instance.RemoveBlock(removePos);
            }
        }
    }
}
